using UnityEngine;using System.Collections;/// <summary>/// 相机特效/// </summary>public enum enEffectCameraType{    None,MotionBlur,Black}public class EffectCamera : MonoBehaviour {    private enEffectCameraType mCurrEffect = enEffectCameraType.None;    /// <summary>    /// 场景半透灰    /// </summary>    private Material mMaterialBlack;    private Material materialBlack    {        get        {            if (mMaterialBlack == null)            {                Shader shader = Shader.Find("FX/BlackTransparent");                mMaterialBlack = new Material(shader);            }            return mMaterialBlack;        }    }    /// <summary>    /// 动态模糊材质球    /// </summary>    private Material mMaterialMotion;    private Material materialMotion    {        get        {            if (mMaterialMotion == null)            {                Shader shader = Shader.Find("FX/MotionBlur");                mMaterialMotion = new Material(shader);            }            return mMaterialMotion;        }    }    #region 后期处理场景（模糊，变暗）    public void ShowEffect(enEffectCameraType _type)    {        mCurrEffect = _type;        this.enabled = true;    }    /// <summary>    /// 清除场景相机特效    /// </summary>    public void Hide(enEffectCameraType _type)    {        if (mCurrEffect == _type || _type == enEffectCameraType.None)        {            mCurrEffect = enEffectCameraType.None;            this.enabled = false;        }    }    /// <summary>    /// 相机动态模糊    /// </summary>    /// <param name="sourceTectrue"></param>    /// <param name="destTexture"></param>    void OnRenderImage(RenderTexture sourceTectrue, RenderTexture destTexture)    {        switch (mCurrEffect)        {            case enEffectCameraType.None:                break;            case enEffectCameraType.MotionBlur:                Graphics.Blit(sourceTectrue, destTexture, materialMotion);                break;            case enEffectCameraType.Black:                Graphics.Blit(sourceTectrue, destTexture, materialBlack);                break;        }    }    #endregion }